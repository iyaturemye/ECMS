<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:p="http://primefaces.org/ui">
    <meta name="viewport" content="width=device-width, 
          initial-scale=1.0, 
          maximum-scale=1.0, 
          user-scalable=no"/>
    <h:head>
        <title>Insurance Dashboard#{(insuranceController.newOne.size()==0)? '':(insuranceController.newOne.size())}</title>
        <link rel="styleSheet" href="../layout/css/bootstrap1.css"></link>
        <script src="../layout/js/jquery.js"/>
        <script src="../layout/js/bootstrap.js"></script>
        <link rel="styleSheet" href="css/mystyle.css"></link>
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous"/>
        <link href="https://fonts.googleapis.com/css?family=Open+Sans+Condensed:300|Slabo+27px" rel="stylesheet"/>
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous"/>
        <!--<link href="https://fonts.googleapis.com/css?family=Playfair+Display|Roboto+Condensed" rel="stylesheet"/>--> 
        <link href="https://fonts.googleapis.com/css?family=Open+Sans+Condensed:300" rel="stylesheet"/>
        <style>
            .mytableStyle th{
                background:#41a1ff;
                color:white;
                border-bottom: 2px solid #41a1ff !important;
            }
            .mytableStyle td{
                border: 2px solid #41a1ff;
                border-collapse: collapse;
            }
            .mytableStyle{
                border: 2px solid #41a1ff;
            }
            .mysecondTable td{
                border:none !important;
            }
            .leftOne{
                background:#41a1ff;
                color:white;
                padding: 5px;
            }
            .table td{
                border:none !important;
            }
            .mytitle a{
                font-size: 12px;
                font-weight: bold;
            }
            .myheading{
                padding:4px !important;
            }
            .mypanelbody{
                font-size: 10px !important;
            }
            pre{
                min-height: 150px !important;
            }
            .brokenCarPart{
                max-height: 300px;
                overflow-x: visible;
                background: white !important;
            }
            body{
                font-family: 'Open Sans Condensed', sans-serif !important;
            }

        </style>
    </h:head>
    <h:body>
        <ui:insert>
            <ui:include src="menu.xhtml"/>
        </ui:insert>
        <h:form>
            <div class="container" style="background: white;border:1px solid #ddd;padding: 5px;">
                <div class="row">
                    <div class="col-lg-4">
                        <h3><b>OWNER INFORMATION</b></h3>
                        <table class="table">
                            <tr>
                                <td><b>CLIENT NAME:</b></td>
                                <td>#{insuranceController.vehicleDetail.client.fname}</td>
                            </tr>
                            <tr>
                                <td><b>PHONE NUMBER:</b></td>
                                <td>#{insuranceController.vehicleDetail.client.phoneNumber}</td>
                            </tr>
                            <tr>
                                <td><b>PLATE NUMBER:</b></td>
                                <td>#{insuranceController.vehicleDetail.vehicle.plateNum.toUpperCase()}</td>
                            </tr>
                            <tr>
                                <td><b>NAME:</b></td>
                                <td>#{insuranceController.vehicleDetail.vehicle.name}</td>
                            </tr>
                            <tr>
                                <td><b>POLICY NUMBER:</b></td>
                                <td>#{insuranceController.vehicleDetail.vehicle.policyNumber}</td>
                            </tr>
                            <tr>
                                <td><b>ACCIDENT LOCATION:</b></td>
                                <td>#{insuranceController.vehicleDetail.location}</td>
                            </tr>
                            <tr>
                                <td><b>PUBLICATION DATE:</b></td>
                                <td>
                                    <h:outputFormat value="#{insuranceController.vehicleDetail.createdAt}">
                                        <f:convertDateTime pattern="dd-MMM-yyyy"/>
                                    </h:outputFormat>
                                </td>
                            </tr>
                        </table>
                        <label><b>REASON</b></label>
                        <pre>
                        <h:outputFormat value="#{insuranceController.vehicleDetail.whatHappen}" escape="false"/>
                        </pre>
                        <div class="form-group">
                            <label class="col-lg-3">Estimated Market Value</label>
                            <div class="col-lg-6">
                                <h:outputText value="#{insuranceController.vehicleDetail.estamedMarketValue}">                           
                                    <f:convertNumber pattern="###,###,###"/>
                                </h:outputText>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4" style="border-right: 1px solid #ddd;border-left: 1px solid #ddd;" >
                        <h3><b>BROKEN CAR A</b></h3>
                        <table class="table">
                            <tr>
                                <td>Plate Number</td>
                                <td>#{insuranceController.vehicleDetail.vehicle.plateNum.toUpperCase()}</td>
                            </tr>
                            <tr>
                                <td>Type</td>
                                <td>#{insuranceController.vehicleDetail.vehicle.name}</td>
                            </tr>
                            <tr>
                                <td>Chasis number</td>
                                <td>#{insuranceController.vehicleDetail.vehicle.chasisNum}</td>
                            </tr>
                            <tr>
                                <td>Policy Number</td>
                                <td>#{insuranceController.vehicleDetail.vehicle.policyNumber}</td>
                            </tr>
                        </table>
                    </div>
                    <c:if test="#{insuranceController.vehicleDetail.vehicleb!=null}">
                        <div class="col-lg-4">
                            <h3><b>BROKEN CAR B</b></h3>
                            <table class="table">
                                <tr>
                                    <td>Plate Number</td>
                                    <td>#{insuranceController.vehicleDetail.vehicleb.plateNum.toUpperCase()}</td>
                                </tr>
                                <tr>
                                    <td>Type</td>
                                    <td>#{insuranceController.vehicleDetail.vehicleb.name}</td>
                                </tr>
                                <tr>
                                    <td>Chasis number</td>
                                    <td>#{insuranceController.vehicleDetail.vehicleb.chasisNum}</td>
                                </tr>
                                <tr>
                                    <td>Policy Number</td>
                                    <td>#{insuranceController.vehicleDetail.vehicleb.policyNumber}</td>
                                </tr>
                                <tr>
                                    <td>Insurance</td>
                                    <td>#{insuranceController.vehicleDetail.insuranceOfvehicleb.name}</td>
                                </tr>
                            </table>
                        </div>
                    </c:if>
                    <div class="col-lg-8" style="border-left: 1px solid #ddd;">
                        <div class="line" style="border-bottom:1px solid #ddd;"></div>

                        <h3><b>BROKEN CAR IMAGE</b></h3>
                        <c:forEach items="#{insuranceController.accidentVehicleImage}" var="item">
                            <img style="width: 200px;max-height: 150px;" src="../layout/image/blockenCar/#{item.image}" class="img-thumbnail"/>
                        </c:forEach>
                    </div>
                    <div class="col-lg-8" style="border-left: 1px solid #ddd;">
                        <div class="line" style="border-bottom:1px solid #ddd;margin:10px;"></div>
                        <h3><b>BROKEN CAR PART</b></h3>
                        <div class="brokenCarPart">
                            <table class="table table-responsive table-condensed">
                                <c:forEach items="#{insuranceController.allBrokenPartParent}" var="ele">
                                    <tr>
                                        <td><b>#{ele.name}</b></td>
                                        <td>
                                            <c:forEach items="#{insuranceController.listOfBrokenPart}" var="item">
                                                <c:if test="#{item.carsparepart.carsparepart.id.equalsIgnoreCase(ele.id)}">
                                                    #{item.carsparepart.name}<br/>
                                                </c:if>
                                            </c:forEach>
                                        </td>
                                    </tr>
                                </c:forEach>
                            </table>
                        </div>
                        <c:if test="#{insuranceController.choosenAdditionalInfo.size()>0}">
                            <div>
                                <h3><b>NONE CLASSIFIED</b></h3>
                                <table class="table">
                                    <thead>
                                        <td>ID</td>
                                        <td>Description</td>
                                    </thead>
                                    <tbody>
                                        <c:forEach items="#{insuranceController.choosenAdditionalInfo}" var="item" varStatus="status">
                                            <tr>
                                                <td>#{status.index + 1}</td>
                                                <td>#{item.description} </td>
                                            </tr>
                                        </c:forEach>
                                    </tbody>
                                </table>
                            </div>
                        </c:if>
                    </div>
                </div>
            </div>
            <div class="container" style="background:white;padding: 15px;border-bottom: 1px solid #ddd;border-left: 1px solid #ddd;border-right: 1px solid #ddd;">
                <div class="rows">
                    <div class="col-lg-12">
                        <c:if test="#{insuranceController.policeReportElement.size()>0}">
                            <b>Police Report</b><br/>
                            <c:forEach items="#{insuranceController.policeReportElement}" var="element">
                                <div class="rows">
                                    <div class="col-lg-3" style="border-right: 1px solid #ddd;">
                                        <h4>Damaged Car A</h4>
                                        <table class="table">
                                            <tr>
                                                <td>Name</td>
                                                <td>#{element.iyagonzeVehicle.name}</td>
                                            </tr>
                                            <tr>
                                                <td>Plate Number</td>
                                                <td>#{element.iyagonzeVehicle.plateNum.toUpperCase()}</td>
                                            </tr>
                                            <tr>
                                                <td>Chasis Number</td>
                                                <td>#{element.iyagonzeVehicle.chasisNum}</td>
                                            </tr>
                                        </table>
                                    </div>
                                    <div class="col-lg-3" style="border-right: 1px solid #ddd;">
                                        <h4>Damaged Car B</h4>
                                        <table class="table">
                                            <tr>
                                                <td>Name</td>
                                                <td>#{element.iyagonzweVehicle.name}</td>
                                            </tr>
                                            <tr>
                                                <td>Plate Number</td>
                                                <td>#{element.iyagonzweVehicle.plateNum.toUpperCase()}</td>
                                            </tr>
                                            <tr>
                                                <td>Chasis Number</td>
                                                <td>#{element.iyagonzweVehicle.chasisNum}</td>
                                            </tr>
                                        </table>
                                    </div>
                                    <div class="col-lg-3" style="border-right: 1px solid #ddd;">
                                        <h4>Third Party</h4>
                                        <table class="table">
                                            <tr>
                                                <td>Name</td>
                                                <td>#{element.thirdParty.name}</td>
                                            </tr>
                                            <tr>
                                                <td>National Id</td>
                                                <td>#{element.thirdParty.nationalId}</td>
                                            </tr>
                                        </table>
                                    </div>

                                    <div class="col-lg-3">
                                        <h4>Cause of Accident</h4>
                                        <h:outputText value="#{element.description}"/><br/>
                                        Reported By :#{element.police.title} &nbsp; #{element.police.fname}&nbsp;#{element.police.lname}<br/>
                                        Additional Document<br/>
                                        <a href="../layout/reportDocument/#{element.additionalDocument}" target="_blank">Open File</a>
                                    </div>
                                </div>
                            </c:forEach>
                        </c:if>
                        <c:if test="#{insuranceController.policeReportElement.size()==0}">
                            <h4>Yet there is no Police Report</h4>
                        </c:if>
                    </div>
                </div>
            </div>

            <div class="container" style="background:white;padding: 15px;border-bottom: 1px solid #ddd;border-left: 1px solid #ddd;border-right: 1px solid #ddd;margin-bottom: 30px;">
                <div class="rows">
                    <div class="col-lg-12">
                        <h:commandButton class="btn btn-primary" value="Approve" action="#{insuranceController.approved()}"/>
                    </div>
                </div>
            </div>
        </h:form>
        <div class="form-group">
            <div class="col-lg-12">
                <p:editor/>
            </div>
        </div>
    </h:body>

</html>

